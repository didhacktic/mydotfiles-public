#!/bin/bash
# --------------------------------------------------
# Script : update_repos.sh
# Auteur : didhacktic
# Description : Commit + Pull + Push automatiques
# pour les d√©p√¥ts GitHub dans ~/didhacktic
# --------------------------------------------------

# Liste des d√©p√¥ts √† mettre √† jour
REPOS=(
  "mydotfiles-public"
  "mydotfiles-private"
)

# R√©pertoire de base
BASE_DIR="$HOME/didhacktic"

# Parcours de chaque d√©p√¥t
for repo in "${REPOS[@]}"; do
    echo "-------------------------------------------"
    echo "üìÅ D√©p√¥t : $repo"
    cd "$BASE_DIR/$repo" || { echo "‚ö†Ô∏è  Impossible d'acc√©der √† $repo"; continue; }

    # Synchronise avec GitHub (r√©cup√®re les nouvelles versions)
    git pull --rebase

    # V√©rifie s‚Äôil y a des changements locaux
    if [[ -n $(git status --porcelain) ]]; then
        echo "üìù Changements d√©tect√©s, cr√©ation du commit..."
        git add .
        git commit -m "Auto-update: $(date '+%Y-%m-%d %H:%M:%S')"
        git push
        echo "‚úÖ Changements envoy√©s sur GitHub."
    else
        echo "‚úÖ Aucun changement local, rien √† faire."
    fi

    echo "-------------------------------------------"
    echo
done

echo "üéâ Tous les d√©p√¥ts sont √† jour !"

